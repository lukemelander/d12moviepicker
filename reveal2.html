<!DOCTYPE html>
<html>
    <head>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
		<script src="./p5.js"></script>
        <script>
function setup(){
    createCanvas(windowWidth,windowHeight);
    background(128,139,150);
	noLoop();
}

async function draw() {

var list = JSON.parse(sessionStorage.getItem("list"));
var data = JSON.parse(sessionStorage.getItem("data"));

textSize(width / 30);
textAlign(LEFT,CENTER);
text("Eliminated:",width/20,2*height/20);


textSize(width / 30);
textAlign(LEFT,CENTER);
var num = data[0].toString()
let txt2 = 'Roll: ';
txt2 += data[0];
txt2 += ' (';
txt2 += list[num].name.toUpperCase();
txt2 += ' ';
txt2 += list[num].year;
txt2 += ')';
text(txt2,width/20,3*height/20)

textSize(width / 30);
textAlign(LEFT,CENTER);
var num = data[1].toString()
let txt3 = 'Roll: '
txt3 += data[1];
txt3 += ' (';
txt3 += list[num].name.toUpperCase();
txt3 += ' ';
txt3 += list[num].year;
txt3 += ')';
text(txt3,width/20,4*height/20)

textSize(width / 30);
textAlign(LEFT,CENTER);
var num = data[2].toString()
let txt4 = 'Roll: '
txt4 += data[2];
txt4 += ' (';
txt4 +=  list[num].name.toUpperCase();
txt4 += ' ';
txt4 += list[num].year;
txt4 += ')';
text(txt4,width/20,5*height/20)

textSize(width / 30);
textAlign(LEFT,CENTER);
var num = data[3].toString()
let txt5 = 'Roll: '
txt5 += data[3];
txt5 += ' (';
txt5 += list[num].name.toUpperCase();
txt5 += ' ';
txt5 += list[num].year;
txt5 += ')';
text(txt5,width/20,6*height/20)

textSize(width / 30);
textAlign(LEFT,CENTER);
var num = data[4].toString()
let txt6 ='Roll: '
txt6 += data[4];
txt6 += ' (';
txt6 += list[num].name.toUpperCase();
txt6 += ' ';
txt6 += list[num].year;
txt6 += ')';
text(txt6,width/20,7*height/20)

textSize(width / 30);
textAlign(LEFT,CENTER);
var num = data[5].toString()
let txt7 = 'Roll: '
txt7 += data[5];
txt7 += ' (';
txt7 +=  list[num].name.toUpperCase();
txt7 += ' ';
txt7 += list[num].year;
txt7 += ')';
text(txt7,width/20,8*height/20)

await sleep(1000)
textSize(width / 30);
textAlign(LEFT,CENTER);
var num = data[6].toString()
let txt8 = 'Roll: '
txt8 += data[6];
txt8 += ' (';
txt8 += list[num].name.toUpperCase();
txt8 += ' ';
txt8 += list[num].year;
txt8 += ')';
text(txt8,width/20,9*height/20)

await sleep(1000)
textSize(width / 30);
textAlign(LEFT,CENTER);
var num = data[7].toString()
let txt9 ='Roll: '
txt9 += data[7];
txt9 += ' (';
txt9 += list[num].name.toUpperCase();
txt9 += ' ';
txt9 += list[num].year;
txt9 += ')';
text(txt9,width/20,10*height/20)

await sleep(1000)
textSize(width / 30);
textAlign(LEFT,CENTER);
var num = data[8].toString()
let txt10 = 'Roll: '
txt10 += data[8];
txt10 += ' (';
txt10 +=  list[num].name.toUpperCase();
txt10 += ' ';
txt10 += list[num].year;
txt10 += ')';
text(txt10,width/20,11*height/20)

textSize(width / 30);
textAlign(CENTER,CENTER);
text("Remaining:",width/2,12*height/20);

const Url = "https://api.random.org/json-rpc/4/invoke"
const pkg2 = {
        "jsonrpc": "2.0",
        "method": "generateIntegerSequences",
        "params": {
            "apiKey": "579c479b-5f2d-4b06-bd79-9f64ca244ce9",
            "n": 1,
            "length" : 3,
            "min": 1,
            "max": 3,
            "replacement": false,
            "base": 10
        },
        "id": 42
    }


let response2 = await axios.post(Url,pkg2);
let mix = response2.data.result.random.data[0];

textSize(width / 30);
textAlign(CENTER,CENTER);
var num = data[8+mix[0]].toString()
let txt11 = list[num].name.toUpperCase();
txt11 += ' ';
txt11 += list[num].year;
text(txt11,width/2,13*height/20)

textSize(width / 30);
textAlign(CENTER,CENTER);
var num = (data[8+mix[1]]).toString()
let txt12 = list[num].name.toUpperCase();
txt12 += ' ';
txt12 += list[num].year;
text(txt12,width/2,14*height/20)

textSize(width / 30);
textAlign(CENTER,CENTER);
var num = (data[8+mix[2]]).toString()
let txt13 = list[num].name.toUpperCase();
txt13 += ' ';
txt13 += list[num].year;
text(txt13,width/2,15*height/20)
//
//textSize(width / 30);
//textAlign(CENTER,CENTER);
//var num = (data[5+mix[3]]).toString()
//let txt11 = list[num].name.toUpperCase();
//txt11 += ' ';
//txt11 += list[num].year;
//text(txt11,width/2,13*height/20)
//
//textSize(width / 30);
//textAlign(CENTER,CENTER);
//var num = (data[5+mix[4]]).toString()
//let txt12 =  list[num].name.toUpperCase();
//txt12 += ' ';
//txt12 += list[num].year;
//text(txt12,width/2,14*height/20)
//
//textSize(width / 30);
//textAlign(CENTER,CENTER);
//var num = (data[5+mix[5]]).toString()
//let txt1 = list[num].name.toUpperCase();
//txt1 += ' ';
//txt1 += list[num].year;
//text(txt1,width/2,15*height/20)

sessionStorage.setItem("list",JSON.stringify(list));
sessionStorage.setItem("data",JSON.stringify(data));
//location.href="reveal2.html";

}

function sleep(ms) {
    return new Promise(resolve => setTimeout(resolve,ms));
}

//reveal2();

		</script>
        <style>
        .container {
          height: 200px;
          position: relative;
          border: 3px solid green;
        }

        .center {
          margin: 0;
          position: absolute;
          top: 50%;
          left: 50%;
          -ms-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
		  font-size: 20%;
        }
		.bottom {
		  margin: 0;			
          position: absolute;
          top: 90%;
          left: 50%;
          -ms-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
          width: 20%;

		}
        </style>
    </head>

	<div>
		<body id="display" class ="center">
		</body>
	</div>
    <div>
        <body>
            <button id="continue" class = "bottom" >Continue</button>
        </body>
    </div>
	<script>
	   var confirm = document.getElementById("continue")
	   confirm.addEventListener("click",function(){
       	  window.location.href = "./revealfinal.html"
	   },false);

	</script>
    <!--><body style="background-color:black;text-align:center">
    </body><!-->
</html>

